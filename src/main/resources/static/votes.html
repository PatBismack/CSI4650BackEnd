<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>All Votes</title>
    <link rel="stylesheet" type="text/css" href="styling.css">
</head>
<body>
<header>
    <img src="Icon.svg" alt="Icon">
    <h1>Distributed Computing - All Votes</h1>
</header>
<div class="container">
    <main>
        <h2>All Recorded Votes</h2>
        <ul id="votesList"></ul>
    </main>
</div>

<script>
    async function fetchAllVotes() {
        const url = 'http://localhost:8080/api/getAllVotes';

        try {
            const response = await fetch(url);
            if (response.ok) {
                const votes = await response.json();
                displayVotes(votes);
            } else {
                showError('Failed to fetch votes');
            }
        } catch (error) {
            console.error('Error:', error);
            showError('An error occurred while fetching votes');
        }
    }

    function displayVotes(votes) {
        const votesList = document.getElementById('votesList');
        votesList.innerHTML = '';

        if (votes.length === 0) {
            votesList.innerHTML = '<p>No votes recorded yet.</p>';
            return;
        }

        votes.forEach(vote => {
            const li = document.createElement('li');
            li.textContent = `Vote: ${vote.vote}, ID: ${vote.id}`;
            votesList.appendChild(li);
        });
    }

    fetchAllVotes();
</script>
</body>
</html>
